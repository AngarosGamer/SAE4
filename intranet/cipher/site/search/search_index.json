{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Bienvenue sur la documentation de Cipher","text":""},{"location":"#introduction","title":"Introduction","text":"<p>Cipher est un projet de mise en place d'une infrastructure r\u00e9seau via l'application de scripts bash. Il permet de mettre en place un r\u00e9seau local avec des machines virtuelles, des serveurs, des clients, et une DMZ, le tout de mani\u00e8re automatique et s\u00e9curis\u00e9e.</p> <p>Vous \u00eates arriv\u00e9s sur nos pages de documentation. Vous trouverez ici toutes les informations n\u00e9cessaires pour mettre en place l'infrastructure de Cipher.</p>"},{"location":"#schema-de-linfrastructure-de-cipher","title":"Sch\u00e9ma de l'infrastructure de Cipher","text":""},{"location":"commencer/","title":"Commencer \u00e0 mettre en place Cipher","text":"<p>L'installation de l'infrastructure de Cipher se fzit en plusieurs \u00e9tapes, dans un ordre d\u00e9fini ici :</p>"},{"location":"commencer/#installation-des-machines-virtuelles","title":"Installation des machines virtuelles","text":"<p>Pour commencer \u00e0 mettre en place Cipher, il faut mettre en marche les diff\u00e9rentes machines qui vont tourner dans l'infrastructure. Pour cela, il faut suivre la documentation Installation-machine.</p>"},{"location":"commencer/#mise-en-place-dun-client","title":"Mise en place d'un client","text":"<p>Si vous souhaitez mettre en place un client (poste de travail), un script peut \u00eatre execut\u00e9 juste apr\u00e8s l'installation de la machine virtuelle, qui mettra en place tous les param\u00e8tres de configuration, installera les paquets n\u00e9cessaires pour \u00eatre int\u00e9gr\u00e9 dans l'infrastructure, et modifie les mots de passe par d\u00e9faut.</p> <p>Cette mise en place sera presque automatique, mais n\u00e9cessite tout de m\u00eame pour quelques \u00e9tapes une intervention manuelle, principalement pour les param\u00e8tres de la machine.</p>"},{"location":"commencer/#mise-en-place-dun-serveur","title":"Mise en place d'un serveur","text":"<p>La mise en place d'un serveur est plus complexe, car il s'agit l\u00e0 de d\u00e9finir pr\u00e9cis\u00e9ment la t\u00e2che que devra accomplir ce serveur en particulier.</p> <p>Une fois le choix sur la t\u00e2che effectu\u00e9, il faut suivre la documentation correspondante, \u00e0 voir en choisissant le script associ\u00e9 dans la page Scripts.</p> <p>La plupart des scripts de mise en place d'un serveur sont automatiques, mais certains n\u00e9cessitent une intervention manuelle pour la configuration de certains param\u00e8tres. Se r\u00e9f\u00e9rer au script en question pour plus de d\u00e9tails.</p>"},{"location":"scripts/","title":"Scripts Cipher","text":"<p>Cipher repose sur une multitude de scripts bash remplissant chacun un r\u00f4le pr\u00e9cis sur l'installation d'un service de l'infrastucture.</p>"},{"location":"scripts/#dhcp","title":"DHCP","text":"<p>Le DHCP permet de distribuer des adresses IP aux machines du r\u00e9seau. Il peut le faire de mani\u00e8re statique ou dynamique, en attribuant une plage d'adresses IP \u00e0 un r\u00e9seau. Nous l'utilisons pour attribuer des adresses IP aux serveurs virtuels de l'infrastructure de mani\u00e8re statique, et dynamique pour les postes de travail.</p> <p>Il y a deux scripts pour le DHCP :</p> <ul> <li><code>dhcp_install_server.sh</code> : Installation \u00e0 faire sur le serveur DHCP (qui distribue les adresses IP)</li> <li><code>dhcp_install_client.sh</code> : Installation \u00e0 faire sur une machine cliente du DHCP (qui re\u00e7oit une adresse IP)</li> </ul>"},{"location":"scripts/#dns","title":"DNS","text":"<p>Le DNS permet principalement de r\u00e9soudre les noms de domaine en adresses IP pour faciliter l'acc\u00e8s aux sites web, et aussi aux diff\u00e9rentes machines et serveurs de l'infrastructure. Notre architecture comporte deux serveurs DNS, le premier pour la dmz, et le second pour le reste de l'infrastructure, c'est ce dernier qui va notamment \u00eatre utilis\u00e9 pour fournir les adresse IP correspondant aux noms de domaines demand\u00e9s par les machines client.</p> <p>Il y a donc trois scripts pour le DNS :</p> <ul> <li><code>dns_intranet_install_server.sh</code> : Installation \u00e0 faire sur le serveur DNS du r\u00e9seau interne</li> <li><code>dns_intranet_install_client.sh</code> : Installation \u00e0 faire sur une machine cliente</li> <li><code>dns_dmz_install_server.sh</code> : Installation \u00e0 faire sur le serveur DNS de la DMZ</li> </ul>"},{"location":"scripts/#pare-feu","title":"Pare-feu","text":"<p>Le pare-feu permet de filtrer les connexions entrantes et sortantes des machines de l'infrastructure. Il permet de bloquer les connexions entrantes et sortantes non autoris\u00e9es, et de limiter les connexions sortantes \u00e0 un certain nombre de connexions par seconde. C'est un outil indispensable pour s\u00e9curiser l'infrastructure.</p> <p>Nous avons plusieurs scripts pour le pare-feu, dont un principal permettant de tout mettre en place :</p> <ul> <li><code>main_firewall.sh</code> : Installation du pare-feu (et toutes les r\u00e8gles associ\u00e9es)</li> </ul> <p>Autres scripts individuels :</p> <ul> <li><code>firewall_reset.sh</code> : R\u00e9initialisation du pare-feu</li> <li><code>firewall_rules_forward</code> : Configuration des r\u00e8gles de paquet transitoires</li> <li><code>firewall_rules_input</code> : Configuration des r\u00e8gles de paquet entrants</li> <li><code>firewall_rules_output</code> : Configuration des r\u00e8gles de paquet sortants</li> <li><code>add_firewall_rule</code> : Ajout d'une r\u00e8gle de pare-feu</li> </ul>"},{"location":"scripts/#machines-virtuelles","title":"Machines Virtuelles","text":"<p>L'architecture cipher se base sur des machines virtuelles, qui sont des machines virtuelles qui tourneront sur un serveur physique. A cet effet, il est n\u00e9cessaire de mettre en place un script d'installation de machines virtuelles.</p> <p>Il existe plusieurs scripts pour la mise en place de machines virtuelles :</p> <ul> <li><code>create_vm.sh</code> : Cr\u00e9ation d'une machine virtuelle</li> <li><code>post-install.sh</code> : Installation automatique de la machine virtuelle apr\u00e8s sa cr\u00e9ation</li> <li><code>make-preseed-iso.sh</code> : Avanc\u00e9 - Cr\u00e9ation d'un fichier ISO contenant un fichier de configuration pour l'installation automatique d'une machine virtuelle</li> </ul>"},{"location":"scripts/#intranet","title":"Intranet","text":""},{"location":"scripts/#journalisation","title":"Journalisation","text":"<p>La journalisation permet de stocker les logs des diff\u00e9rents services de l'infrastructure. Nous utilisons un serveur de journalisation pour stocker les logs de tous les autres serveurs dans un espace de stockage centralis\u00e9.</p> <p>Il y a deux scripts pour la journalisation :</p> <ul> <li><code>journald_install_server.sh</code> : Installation \u00e0 faire sur le serveur de journalisation</li> <li><code>journald_install_client.sh</code> : Installation \u00e0 faire sur une machine cliente</li> </ul>"},{"location":"scripts/#kerberos","title":"Kerberos","text":"<p>Kerberos est un outil de s\u00e9curit\u00e9 qui permet d'authentifier les utilisateurs. Il est utilis\u00e9 pour l'authentification des utilisateurs sur les machines virtuelles, et pour l'authentification des utilisateurs sur les serveurs, et pour NFS.</p> <p>Nous avons 2 scripts pour le Kerberos :</p> <ul> <li><code>kerberos-server.sh</code> : Installation \u00e0 faire sur le serveur Kerberos</li> <li><code>kerberos-client.sh</code> : Installation \u00e0 faire sur une machine cliente</li> </ul>"},{"location":"scripts/#ldap","title":"LDAP","text":"<p>Le LDAP est un annuaire de donn\u00e9es, qui permet de stocker des informations sur les utilisateurs, les groupes, les machines, etc. Il est utilis\u00e9 pour l'authentification des utilisateurs, et pour la gestion des groupes d'utilisateurs.</p> <p>Nous avons 2 scripts pour le LDAP :</p> <ul> <li><code>ldap_install_server.sh</code> : Installation \u00e0 faire sur le serveur LDAP</li> <li><code>ldap_install_client.sh</code> : Installation \u00e0 faire sur une machine cliente</li> </ul>"},{"location":"scripts/#nfs-serveur-de-fichiers","title":"NFS (Serveur de fichiers)","text":"<p>Le service NFS permet de partager des fichiers et des dossiers entre plusieurs machines. Il est utilis\u00e9 pour partager des fichiers entre les machines virtuelles et le serveur NFS qui contient ces fichiers.</p> <p>C'est un outil utile pour pouvoir changer de poste de travail et continuer \u00e0 travailler sur les m\u00eames fichiers.</p> <p>Nous avons 2 scripts pour le NFS :</p> <ul> <li><code>nfs_install_server.sh</code> : Installation \u00e0 faire sur le serveur NFS</li> <li><code>nfs_install_client.sh</code> : Installation \u00e0 faire sur une machine cliente</li> </ul>"},{"location":"scripts/#serveur-de-bases-de-donnees","title":"Serveur de bases de donn\u00e9es","text":"<p>Le serveur de bases de donn\u00e9es est un serveur qui permet de stocker des donn\u00e9es dans des bases de donn\u00e9es. Il est utilis\u00e9 notamment dans le cadre d'un site web dynamique. Bien que nous n'en faisons pas utilisation, nous avons mis en place un script pour installer Postgres sur une machine de son choix.</p> <p>Il n'y a qu'un script pour le serveur de bases de donn\u00e9es :</p> <ul> <li><code>postgres_install.sh</code> : Installation \u00e0 faire sur le serveur de bases de donn\u00e9es</li> </ul>"},{"location":"scripts/#test","title":"Test","text":"<p>Afin de pouvoir tester l'infrastructure, nous avons mis en place des scripts \u00e0 executer permettant de tester l'ensemble des services de l'infrastructure.</p> <p>A cet effet, nous avons mis en place 2 scripts :</p> <ul> <li><code>test-connectivite.sh</code> : Script de test pour la disponibilit\u00e9 des machines de l'infrastructure</li> <li><code>test-services.sh</code> : Script de test pour la disponibilit\u00e9 des services de l'infrastructure</li> </ul>"},{"location":"scripts/#zabbix","title":"Zabbix","text":"<p>Zabbix est notre outil de surveillance du r\u00e9seau. Il permet de surveiller l'\u00e9tat des machines, et de d\u00e9tecter les probl\u00e8mes qui ont pu survenir. C'es un outil puissant qui permettra de rapidement visualiser l'\u00e9tat du r\u00e9seau.</p> <p>Nous n'avons besoin que d'un script \u00e0 executer sur le serveur Zabbix :</p> <ul> <li><code>zabbix_install.sh</code> : Installation \u00e0 faire sur le serveur Zabbix</li> </ul>"},{"location":"troubleshooting/","title":"Probl\u00e8mes rencontr\u00e9s ?","text":""},{"location":"troubleshooting/#installation-de-vm","title":"Installation de VM","text":""},{"location":"troubleshooting/#pas-de-connexion-internet","title":"Pas de connexion internet","text":"<p>Assurez vous que l'interface r\u00e9seau correspond bien \u00e0 ce que vous souhaitez, et que la configuration IP est correcte.</p> <p>Par exemple, si votre interface est sur le r\u00e9seau <code>192.168.0.0/24</code>, assurez vous que l'adresse IP de la machine virtuelle est bien dans ce r\u00e9seau: <code>192.168.0.1 - 192.168.0.254</code></p> <p>Si cela semble bon, l'erreur peut venir de la route par d\u00e9faut. Pour v\u00e9rifier cela, lancez la commande suivante:</p> <pre><code>root@machine:~# ip route\n</code></pre> <p>Et que l'adresse montr\u00e9e est celle de votre routeur sur le r\u00e9seau.</p> <p>Derni\u00e8rement, cela pourrait \u00eatre un probl\u00e8me li\u00e9 au NAT. Assurez vous que le NAT est bien activ\u00e9 sur votre routeur et que celui-ci est bien configur\u00e9 pour rediriger les paquets vers le r\u00e9seau. Si vous avez un pare-feu, vous pouvez aussi essayer de modifier les r\u00e8gles qui pourraient bloquer ce type de connexions.</p>"},{"location":"troubleshooting/#installation-de-pare-feu","title":"Installation de pare-feu","text":""},{"location":"troubleshooting/#les-regles-ne-sont-pas-appliquees","title":"Les r\u00e8gles ne sont pas appliqu\u00e9es","text":"<p>Assurez vous que le pare-feu est bien lanc\u00e9 et actif. Pour cela, vous pouvez utiliser la commande suivante:</p> <pre><code>root@machine:~# systemctl status nftables\n</code></pre> <p>Si le pare-feu est bien lanc\u00e9, vous pouvez v\u00e9rifier les r\u00e8gles qui sont appliqu\u00e9es avec la commande suivante:</p> <pre><code>root@machine:~# nft list ruleset\n</code></pre> <p>Assurez-vous par ailleurs que les r\u00e8gles ont la bonne cha\u00eene de traitement et le bon hook. Par exemple, si vous souhaitez que les r\u00e8gles soient appliqu\u00e9es aux paquets transitants par l'interface <code>eth0</code>, vous devez utiliser le hook <code>input</code> et la cha\u00eene <code>prerouting</code>:</p>"},{"location":"scripts/dhcp/client/","title":"DHCP Client","text":"<p>Le script d'installation du client DHCP permet de configurer une machine pour qu'elle re\u00e7oive une adresse IP dynamiquement de la part du serveur DHCP mis en place (voir DHCP Server). Il est \u00e0 installer sur chaque machine cliente du r\u00e9seau.</p>"},{"location":"scripts/dhcp/client/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Retrouvez le script t\u00e9l\u00e9chargeable ici : DHCP Client</p>"},{"location":"scripts/dhcp/client/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Avoir une machine virtuelle Debian 11 install\u00e9e (voir Installation-machine)</li> <li>Avoir une connexion internet</li> <li>Avoir un acc\u00e8s <code>root</code> sur la machine cliente</li> </ul>"},{"location":"scripts/dhcp/client/#installation","title":"Installation","text":"<p>Pour installer le DHCP cot\u00e9 client, il suffit de lancer le script <code>dhcp_install_client.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>utilisateur@machine:~# ./dhcp_install_client.sh\n</code></pre> <p>Votre machine est maintenant configur\u00e9e</p>"},{"location":"scripts/dhcp/server/","title":"DHCP Serveur","text":"<p>Le serveur DHCP permet de distribuer des adresses IP aux machines du r\u00e9seau. Il peut le faire de mani\u00e8re statique ou dynamique, en attribuant une plage d'adresses IP \u00e0 un r\u00e9seau.</p>"},{"location":"scripts/dhcp/server/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Retrouvez le script t\u00e9l\u00e9chargeable ici : DHCP Server</p>"},{"location":"scripts/dhcp/server/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Avoir une machine virtuelle Debian 11 install\u00e9e (voir Installation-machine)</li> <li>Avoir une connexion internet</li> <li>Avoir un acc\u00e8s <code>root</code> au serveur</li> </ul>"},{"location":"scripts/dhcp/server/#installation","title":"Installation","text":"<p>Pour installer le serveur DHCP, il suffit de lancer le script <code>dhcp_install_server.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>utilisateur@machine:~# ./dhcp_install_server.sh\n</code></pre> <p>Votre serveur est maintenant configur\u00e9e</p>"},{"location":"scripts/dns/client/","title":"DNS Client","text":"<p>Le script d'installation du client DNS permet de configurer une machine pour qu'elle utilise le serveur DNS (voir DNS Server). Il est \u00e0 installer sur chaque machine cliente du r\u00e9seau.</p>"},{"location":"scripts/dns/client/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Retrouvez le script t\u00e9l\u00e9chargeable ici : DNS Client</p>"},{"location":"scripts/dns/client/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Avoir une machine virtuelle Debian 11 install\u00e9e (voir Installation-machine)</li> <li>Avoir une connexion internet</li> <li>Avoir un acc\u00e8s <code>root</code> au serveur</li> </ul>"},{"location":"scripts/dns/client/#installation","title":"Installation","text":"<p>Pour installer le DNS cot\u00e9 client, il suffit de lancer le script <code>dns_intranet_install_client.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>utilisateur@machine:~# ./dns_intranet_install_client.sh\n</code></pre> <p>Votre machine est maintenant configur\u00e9e</p>"},{"location":"scripts/dns/server_dmz/","title":"DNS DMZ Serveur","text":"<p>Le serveur DNS de la DMZ permet de distribuer les noms de domaine des machines de l'intranet aux machines ext\u00e9rieures au r\u00e9seau.</p>"},{"location":"scripts/dns/server_dmz/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Retrouvez le script t\u00e9l\u00e9chargeable ici : DNS DMZ Server</p>"},{"location":"scripts/dns/server_dmz/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Avoir une machine virtuelle Debian 11 install\u00e9e (voir Installation-machine)</li> <li>Avoir une connexion internet</li> <li>Avoir un acc\u00e8s <code>root</code> au serveur</li> </ul>"},{"location":"scripts/dns/server_dmz/#installation","title":"Installation","text":"<p>Pour installer le serveur DNS de la DMZ, il suffit de lancer le script <code>dns_dmz_install_server.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>utilisateur@machine:~# ./dns_dmz_install_server.sh\n</code></pre> <p>Votre serveur est maintenant configur\u00e9e</p>"},{"location":"scripts/dns/server_intranet/","title":"DNS Intranet Serveur","text":"<p>Le serveur DNS permet de distribuer des adresses IP aux machines du r\u00e9seau. Il peut le faire de mani\u00e8re statique ou dynamique, en attribuant une plage d'adresses IP \u00e0 un r\u00e9seau.</p>"},{"location":"scripts/dns/server_intranet/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Retrouvez le script t\u00e9l\u00e9chargeable ici : DNS Serveur</p>"},{"location":"scripts/dns/server_intranet/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Avoir une machine virtuelle Debian 11 install\u00e9e (voir Installation-machine)</li> <li>Avoir une connexion internet</li> <li>Avoir un acc\u00e8s <code>root</code> au serveur</li> </ul>"},{"location":"scripts/dns/server_intranet/#installation","title":"Installation","text":"<p>Pour installer le serveur DNS de l'intranet, il suffit de lancer le script <code>dns_intranet_install.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>utilisateur@machine:~# ./dns_intranet_install_client.sh\n</code></pre> <p>Votre serveur est maintenant configur\u00e9e</p>"},{"location":"scripts/firewall/add/","title":"Ajout de r\u00e8gles particuli\u00e8res","text":"<p>Les autres scripts se chargent de la cr\u00e9ation et application en masse de r\u00e8gles pour le pare-feu. Ce script permet de rajouter des r\u00e8gles simples directement dans le pare-feu, une par une. Ces r\u00e8gles ne seront pas ajout\u00e9es au scripts, donc elles ne seront pas r\u00e9appliqu\u00e9es en cas de r\u00e9initialisation du pare-feu.</p> <p>C'est un script facile d'utilisation mais qui n\u00e9cessite toutefois une certaine connaissance des r\u00e8gles de pare-feu et de l'infrasttucture globale. Il est donc conseill\u00e9 de ne pas l'utiliser si vous n'\u00eates pas s\u00fbr de ce que vous faites.</p>"},{"location":"scripts/firewall/add/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Un acc\u00e8s <code>root</code> \u00e0 la machine virtuelle</li> </ul>"},{"location":"scripts/firewall/add/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script d'ajout de r\u00e8gle du pare-feu est disponible ici : Ajout de r\u00e8gles pare-feu</p>"},{"location":"scripts/firewall/add/#utilisation","title":"Utilisation","text":"<p>Pour ajouter des r\u00e8gles dans le pare-feu, il suffit de lancer le script <code>add_firewall_rule.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>root@machine:~# ./add_firewall_rule.sh\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>root@machine:~# chmod +x add_firewall_rule.sh\n</code></pre> <p>Ce script ajoute une seule r\u00e8gle \u00e0 la fois. Il est donc conseill\u00e9 de l'utiliser en boucle pour ajouter plusieurs r\u00e8gles. De plus, les r\u00e8gles ne sont pas sauvegard\u00e9es, donc elles ne seront pas r\u00e9appliqu\u00e9es en cas de r\u00e9initialisation du pare-feu.</p> <p>Ce script n'a pas vocation a \u00eatre modifi\u00e9. Il est possible de modifier ce script pour ajouter des fonctionnalit\u00e9s, mais c'est un travail avanc\u00e9.</p>"},{"location":"scripts/firewall/forward/","title":"R\u00e8gles de redirection","text":"<p>Lorsque le pare-feu est install\u00e9 sur un routeur, les paquets ne sont pas forc\u00e9ment \u00e0 destination de la machine elle-m\u00eame. Il faut alors appliquer des r\u00e8gles de redirection pour filtrer les paquets.</p> <p>ATTENTION: Ce script n'est utilis\u00e9 que pour les r\u00e8gles de redirection. Ce n'est pas une installation compl\u00e8te du pare-feu. Il est conseill\u00e9 d'utiliser ce script uniquement en combinaison avec les autres scripts d'installation du pare-feu.</p>"},{"location":"scripts/firewall/forward/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Un acc\u00e8s <code>root</code> \u00e0 la machine virtuelle</li> </ul>"},{"location":"scripts/firewall/forward/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script de r\u00e8gles de redirection du pare-feu est disponible ici : Redirection pare-feu</p>"},{"location":"scripts/firewall/forward/#utilisation","title":"Utilisation","text":"<p>Pour les r\u00e8gles de redirection dans le pare-feu, il suffit de lancer le script <code>firewall_rules_forward.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>root@machine:~# ./firewall_rules_forward.sh\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>root@machine:~# chmod +x firewall_rules_forward.sh\n</code></pre> <p>Si ce script est utilis\u00e9 seul, alors la machine aura un pare-feu contenant des r\u00e8gles particuli\u00e8res \u00e0 la redirection de paquets. Il est donc conseill\u00e9 d'utiliser ce script uniquement en combinaison avec les autres scripts d'installation du pare-feu.</p> <p>Ce script a vocation a \u00eatre modifi\u00e9 pour ajouter ou modifier les r\u00e8gles de redirection. Il est donc possible de modifier ce script pour ajouter des r\u00e8gles de redirection.</p>"},{"location":"scripts/firewall/input/","title":"R\u00e8gles d'entr\u00e9e","text":"<p>Les r\u00e8gles d'entr\u00e9e sont les r\u00e8gles qui d\u00e9finissent quelles connexions sont autoris\u00e9es \u00e0 entrer sur la machine, qui lui sont directement destin\u00e9es. Ce script se charge de param\u00e9trer les connexions entrantes automatiquement pour les r\u00e8gles permanentes.</p> <p>ATTENTION: Ce script n'est utilis\u00e9 que pour les r\u00e8gles d'entr\u00e9e. Ce n'est pas une installation compl\u00e8te du pare-feu. Il est conseill\u00e9 d'utiliser ce script uniquement en combinaison avec les autres scripts d'installation du pare-feu.</p>"},{"location":"scripts/firewall/input/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Un acc\u00e8s <code>root</code> \u00e0 la machine virtuelle</li> </ul>"},{"location":"scripts/firewall/input/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script de r\u00e8gles d'entr\u00e9e du pare-feu est disponible ici : R\u00e8gles d'entr\u00e9e pare-feu</p>"},{"location":"scripts/firewall/input/#utilisation","title":"Utilisation","text":"<p>Pour les r\u00e8gles d'entr\u00e9e dans le pare-feu, il suffit de lancer le script <code>firewall_rules_input.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>root@machine:~# ./firewall_rules_input.sh\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>root@machine:~# chmod +x firewall_rules_input.sh\n</code></pre> <p>Si ce script est utilis\u00e9 seul, alors la machine aura un pare-feu contenant des r\u00e8gles particuli\u00e8res aux paquets entrants. Il est donc conseill\u00e9 d'utiliser ce script uniquement en combinaison avec les autres scripts d'installation du pare-feu.</p> <p>Ce script a vocation a \u00eatre modifi\u00e9 pour ajouter ou modifier les r\u00e8gles d'entr\u00e9e. Il est donc possible de modifier ce script pour ajouter des r\u00e8gles d'entr\u00e9e.</p>"},{"location":"scripts/firewall/install/","title":"Installer le pare-feu","text":"<p>Le pare-feu permet de filtrer les connexions entrantes et sortantes d'une machine. Il permet de bloquer les connexions entrantes et sortantes non d\u00e9sir\u00e9es. Ce script est le script principal qui permet d'installer le pare-feu (nftables) si ce n'est pas fait, et de configurer le pare-feu pour qu'il soit fonctionnel avec toutes les r\u00e8gles.</p>"},{"location":"scripts/firewall/install/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Une connexion internet active est n\u00e9cessaire pour lancer ce script.</li> <li>Un acc\u00e8s <code>root</code> \u00e0 la machine virtuelle</li> </ul>"},{"location":"scripts/firewall/install/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script d'installation du pare-feu est disponible ici : Installation pare-feu</p>"},{"location":"scripts/firewall/install/#utilisation","title":"Utilisation","text":"<p>Pour installer le pare-feu, il suffit de lancer le script <code>main_firewall.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>root@machine:~# ./main_firewall.sh\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>root@machine:~# chmod +x main_firewall.sh\n</code></pre> <p>L'installation se fait cependant automatiquement sans configuration suppl\u00e9mentaire n\u00e9cessaire. Il n'a pas vocation \u00e0 recevoir d'autres modifications, ce script est con\u00e7u pour appeler d'autres scripts qui remplissent chacun une t\u00e2che dans la mise en place d'un groupe de r\u00e8gles du pare-feu.</p>"},{"location":"scripts/firewall/install/#references","title":"R\u00e9f\u00e9rences","text":"<ul> <li>R\u00e9initialiser le pare-feu : R\u00e9initialiser le pare-feu</li> <li>R\u00e8gle de <code>forward</code> : R\u00e8gle de <code>forward</code></li> <li>R\u00e8gle de <code>input</code> : R\u00e8gle de <code>input</code></li> <li>R\u00e8gle de <code>output</code> : R\u00e8gle de <code>output</code></li> </ul>"},{"location":"scripts/firewall/output/","title":"R\u00e8gles de sortie","text":"<p>Les r\u00e8gles de sortie sont les r\u00e8gles qui d\u00e9finissent quelles connexions sont autoris\u00e9es \u00e0 sortir de la machine, les requ\u00eates produites directement par la machine en question. Ce script se charge de param\u00e9trer les connexions sortantes automatiquement pour les r\u00e8gles permanentes.</p> <p>ATTENTION: Ce script n'est utilis\u00e9 que pour les r\u00e8gles de sortie. Ce n'est pas une installation compl\u00e8te du pare-feu. Il est conseill\u00e9 d'utiliser ce script uniquement en combinaison avec les autres scripts d'installation du pare-feu.</p>"},{"location":"scripts/firewall/output/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Un acc\u00e8s <code>root</code> \u00e0 la machine virtuelle</li> </ul>"},{"location":"scripts/firewall/output/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script de r\u00e8gles de sortie du pare-feu est disponible ici : R\u00e8gles de sortie pare-feu</p>"},{"location":"scripts/firewall/output/#utilisation","title":"Utilisation","text":"<p>Pour les r\u00e8gles de sortie dans le pare-feu, il suffit de lancer le script <code>firewall_rules_output.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>root@machine:~# ./firewall_rules_output.sh\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>root@machine:~# chmod +x firewall_rules_output.sh\n</code></pre> <p>Si ce script est utilis\u00e9 seul, alors la machine aura un pare-feu contenant des r\u00e8gles particuli\u00e8res aux paquets sortants. Il est donc conseill\u00e9 d'utiliser ce script uniquement en combinaison avec les autres scripts d'installation du pare-feu.</p> <p>Ce script a vocation a \u00eatre modifi\u00e9 pour ajouter ou modifier les r\u00e8gles de sortie. Il est donc possible de modifier ce script pour ajouter des r\u00e8gles de sortie.</p>"},{"location":"scripts/firewall/reset/","title":"R\u00e9initialiser le pare-feu","text":"<p>Le pare-feu doit parfois \u00eatre r\u00e9initialis\u00e9. Cela peut \u00eatre n\u00e9cessaire si le pare-feu est corrompu ou si des r\u00e8gles ont \u00e9t\u00e9 ajout\u00e9es manuellement. C'est aussi pratique quand on modifie des r\u00e8gles de pare-feu et que l'on doit en supprimer certaines.</p> <p>ATTENTION : Cette op\u00e9ration supprime toutes les r\u00e8gles de pare-feu. Il est donc n\u00e9cessaire de les r\u00e9installer apr\u00e8s avoir r\u00e9initialis\u00e9 le pare-feu, sinon le pare-feu ne sera plus fonctionnel. Il est conseill\u00e9 d'utiliser ce script uniquement en combinaison avec les scripts d'installation du pare-feu.</p>"},{"location":"scripts/firewall/reset/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Un acc\u00e8s <code>root</code> \u00e0 la machine virtuelle</li> </ul>"},{"location":"scripts/firewall/reset/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script de r\u00e9initialisation du pare-feu est disponible ici : R\u00e9initialisation pare-feu</p>"},{"location":"scripts/firewall/reset/#utilisation","title":"Utilisation","text":"<p>Pour r\u00e9initialiser les r\u00e8gles de pare-feu, il suffit de lancer le script <code>firewall_reset.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>root@machine:~# ./firewall_reset.sh\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>root@machine:~# chmod +x firewall_reset.sh\n</code></pre> <p>Toutes les r\u00e8gles seront alors supprim\u00e9es, et la configuration sera remise \u00e0 une configuration basique avec le NAT. Le pare-feu n'offrira alors plus aucune protection.</p> <p>Ce script n'a pas vocation \u00e0 \u00eatre modifi\u00e9. Il est donc recommand\u00e9 de ne pas le modifier, ou alors de le modifier avec pr\u00e9caution.</p>"},{"location":"scripts/journalisation/client/","title":"Installer la journalisation centralis\u00e9e sur une machine cliente","text":"<p>La journalisation centralis\u00e9e permet de centraliser les logs de plusieurs machines sur un serveur. Cela permet de pouvoir facilement consulter les logs de plusieurs machines depuis un seul endroit. Nous nous int\u00e9resserons ici \u00e0 l'installation de la journalisation centralis\u00e9e sur une machine cliente.</p>"},{"location":"scripts/journalisation/client/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Une connexion internet active est n\u00e9cessaire pour lancer ce script.</li> <li>Un acc\u00e8s <code>root</code> \u00e0 la machine virtuelle</li> </ul>"},{"location":"scripts/journalisation/client/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script d'installation de la journalisation centralis\u00e9e est disponible ici : Installation journalisation cliente</p>"},{"location":"scripts/journalisation/client/#utilisation","title":"Utilisation","text":"<p>Pour installer la journalisation centralis\u00e9e sur un client, il suffit de lancer le script <code>journald_install_client.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>root@machine:~# ./journald_install_client.sh\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>root@machine:~# chmod +x journald_install_client.sh\n</code></pre> <p>Attention, ce script emploie des param\u00e8tres do configuration directement dans le script. Il est donc n\u00e9cessaire de modifier le script si l'on souhaite changer les param\u00e8tres de configuration.</p> <p>L'installation se fait cependant automatiquement sans configuration suppl\u00e9mentaire n\u00e9cessaire.</p>"},{"location":"scripts/journalisation/server/","title":"Installer la journalisation centralis\u00e9e sur un serveur","text":"<p>La journalisation centralis\u00e9e permet de centraliser les logs de plusieurs machines sur un serveur. Cela permet de pouvoir facilement consulter les logs de plusieurs machines depuis un seul endroit. Nous nous int\u00e9resserons ici \u00e0 l'installation de la journalisation centralis\u00e9e sur un serveur.</p>"},{"location":"scripts/journalisation/server/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Une connexion internet active est n\u00e9cessaire pour lancer ce script.</li> <li>Un acc\u00e8s <code>root</code> \u00e0 la machine virtuelle</li> <li>Un espace de stockage plus grand que 3Go</li> </ul>"},{"location":"scripts/journalisation/server/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script d'installation de la journalisation centralis\u00e9e sur serveur est disponible ici : Installation journalisation serveur</p>"},{"location":"scripts/journalisation/server/#utilisation","title":"Utilisation","text":"<p>Pour installer la journalisation centralis\u00e9e sur un serveur, il suffit de lancer le script <code>journald_install_server.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>root@machine:~# ./journald_install_server.sh\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>root@machine:~# chmod +x journald_install_server.sh\n</code></pre> <p>Attention, ce script emploie des param\u00e8tres do configuration directement dans le script. Il est donc n\u00e9cessaire de modifier le script si l'on souhaite changer les param\u00e8tres de configuration.</p> <p>L'installation se fait cependant automatiquement sans configuration suppl\u00e9mentaire n\u00e9cessaire.</p>"},{"location":"scripts/kerberos/client/","title":"Installer Kerberos sur machine cliente","text":"<p>L'installation de Kerberos sur une machine cliente permet de pouvoir se connecter \u00e0 un serveur Kerberos afin d'en utiliser les services. C'est une installation simple qui se fait ici sous la forme d'un script bash.</p>"},{"location":"scripts/kerberos/client/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Connexion internet active</li> <li>Avoir un acc\u00e8s <code>root</code> \u00e0 la machine virtuelle</li> </ul>"},{"location":"scripts/kerberos/client/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script d'installation de Kerberos est disponible ici : Installation Kerberos</p>"},{"location":"scripts/kerberos/client/#utilisation","title":"Utilisation","text":"<p>Pour installer Kerberos sur une machine cliente, il suffit de lancer le script <code>kerberos-client.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>root@machine:~# ./kerberos-client.sh\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>root@machine:~# chmod +x kerberos-client.sh\n</code></pre> <p>Le script va installer les packages n\u00e9cessaires \u00e0 l'installation de Kerberos, et va ensuite lancer l'installation de Kerberos avec la configuration par d\u00e9faut de Kerberos cot\u00e9 client.</p>"},{"location":"scripts/kerberos/server/","title":"Installer Kerberos sur un serveur","text":"<p>Kerberos est un syst\u00e8me d'authentification qui permet de s'authentifier sur un serveur, et de pouvoir ensuite utiliser les services de ce serveur. Nous allons ici voir comment installer Kerberos sur un serveur, afin de pouvoir ensuite l'utiliser pour s'authentifier sur un client.</p>"},{"location":"scripts/kerberos/server/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Une connexion internet active est n\u00e9cessaire pour lancer ce script.</li> <li>Un acc\u00e8s <code>root</code> \u00e0 la machine virtuelle</li> </ul>"},{"location":"scripts/kerberos/server/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script d'installation de Kerberos est disponible ici : Installation Kerberos</p>"},{"location":"scripts/kerberos/server/#utilisation","title":"Utilisation","text":"<p>Pour installer Kerberos sur un serveur, il suffit de lancer le script <code>kerberos-server.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>root@machine:~# ./kerberos-server.sh\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>root@machine:~# chmod +x kerberos-server.sh\n</code></pre> <p>Ce script va utiliser des fichiers de configuration pour Kerberos que nous avons \u00e9crit ici :</p> <ul> <li><code>KRB5 Kerberos</code></li> <li><code>KDC Kerberos</code></li> </ul> <p>Le script d'installation n'est pas enti\u00e8rement fonctionnel. Cette page est simpl\u00e9ment pour r\u00e9f\u00e9rence vers le d\u00e9but du travail mais ne fournira pas une installation compl\u00e8te et fonctionnelle de Kerberos.</p>"},{"location":"scripts/ldap/client/","title":"Connecter le client \u00e0 l'annuaire LDAP","text":""},{"location":"scripts/ldap/client/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Avoir un acc\u00e8s root sur la machine physique (ou virtuelle) sur laquelle lancer l'installation</li> </ul>"},{"location":"scripts/ldap/client/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script d'installation du LDAP cot\u00e9 client est disponible ici : Installer LDAP client</p>"},{"location":"scripts/ldap/client/#installation","title":"Installation","text":"<p>Pour installer le LDAP cot\u00e9 client, il suffit de lancer le script <code>ldap_install_client.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>utilisateur@machine:~# ./ldap_install_client\n</code></pre> <p>Une premiere interface s'ouvrira afin de configurer nslcd, o\u00f9 vous devez choisir :</p> <ul> <li>LDAP server: ldap://192.168.1.7/</li> <li>Distinguished name base: dc=cipher,dc=com</li> <li>Activer le password, shadow et group gr\u00e2ce \u00e0 la barre espace</li> </ul> <p>Puis une seconde interface s'ouvrira et vous devez cocher \"Create home directory on login\" gr\u00e2ce \u00e0 la barre espace</p> <p>Une fois le serveur configur\u00e9, vous pourrez avoir acc\u00e8s aux compte r\u00e9pertori\u00e9 dans l'annuaire.</p>"},{"location":"scripts/ldap/client/#test","title":"Test","text":"<p>Vous pouvez tester l'acc\u00e8s \u00e0 l'annuaire en effectuant la commande shell :</p> <pre><code>getent passwd\n</code></pre> <p>qui affichera en plus des comptes cr\u00e9\u00e9s localement, les comptes distants de l'annuaire LDAP.</p>"},{"location":"scripts/ldap/server/","title":"Configurer l'annuaire LDAP","text":""},{"location":"scripts/ldap/server/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Avoir un acc\u00e8s root sur la machine physique (ou virtuelle) sur laquelle lancer l'installation</li> </ul>"},{"location":"scripts/ldap/server/#installer-le-serveur-ldap","title":"Installer le serveur LDAP","text":""},{"location":"scripts/ldap/server/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script d'installation du LDAP cot\u00e9 client est disponible ici : Installer LDAP server</p>"},{"location":"scripts/ldap/server/#installation","title":"Installation","text":"<p>Pour installer le LDAP cot\u00e9 client, il suffit de lancer le script <code>ldap_install_server.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>server@machine:~# ./ldap_install_server.sh \n</code></pre> <p>Une fenetre de configuration s'ouvrira et vous devrez s\u00e9l\u00e9ctionner les \u00e9l\u00e9ments suivants :</p> <ul> <li>Non : pour pouvoir utiliser l'outil de configuration</li> <li>cipher.com : comme nom de domaine</li> <li>cipher : comme nom d'entreprise</li> <li>Entrez un mot de passe administrateur</li> <li>Non : pour ne pas supprimer la base en meme temps que le package slapd</li> <li>Oui : pour deplacer les anciennes bases de donn\u00e9es</li> </ul> <p>Votre serveur est maintenant configurer, avec 3 branches : Machines, Personnes et serveurs</p>"},{"location":"scripts/ldap/server/#test","title":"Test","text":"<p>Vous pouvez afficher chaque entr\u00e9es de votre annuaire avec la commande slapcat, \u00e0 ce niveau, elle ne devrait afficher que 3 paragraphes : un pour machines, serveurs et personnes. Apr\u00e8s avoir renseign\u00e9 des utilisateurs avec le script ldap_add_user, vous verrez aparaitre des paragraphe suppl\u00e9mentaire correspondant \u00e0 des comptes utilisateur sous le dn=Personnes.</p>"},{"location":"scripts/ldap/server/#ajouter-des-utilisateurs","title":"Ajouter des utilisateurs","text":""},{"location":"scripts/ldap/server/#telechargement-de-ce-script","title":"T\u00e9l\u00e9chargement de ce script","text":"<p>Le script d'ajout d'utilisateur est disponible ici : Ajouter utilisateur</p>"},{"location":"scripts/ldap/server/#utilisation","title":"Utilisation","text":"<p>Pour ajouter un utilisateur, il suffit de lancer le script <code>ldap_add_user.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> : Vous devez renseigner le nom du nouvel utilisateur, ainsi que l'uid et le gid que vous voulez lui attribuer :</p> <pre><code>server@machine:~# ./ldap_add_user.sh nom uid gid\n</code></pre> <p>Votre utilisateur est maintenant cr\u00e9\u00e9, vous pouvez le v\u00e9rifier avec la commande slapcat vu pr\u00e9c\u00e9demment.</p> <p>Son passeword est son nom par d\u00e9faut, lors de la connexion d'un client \u00e0 ce compte, il sera invit\u00e9 \u00e0 changer son mot de passe puis \u00e0 se reconnecter.</p>"},{"location":"scripts/nfs/client/","title":"Configurer le NFS cot\u00e9 client","text":""},{"location":"scripts/nfs/client/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Avoir un acc\u00e8s root sur la machine physique (ou virtuelle) sur laquelle lancer l'installation</li> </ul>"},{"location":"scripts/nfs/client/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script d'installation du NFS cot\u00e9 client est disponible ici : Installer NFS client</p>"},{"location":"scripts/nfs/client/#installation","title":"Installation","text":"<p>Pour installer le NFS cot\u00e9 client, il suffit de lancer le script <code>nfs_install_client.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> : Il vous faut renseigner l'adresse ip du serveur de fichier sur lequel est install\u00e9 le serveur NFS</p> <pre><code>utilisateur@machine:~# ./nfs_install_client.sh ip_serveur_nfs\n</code></pre>"},{"location":"scripts/nfs/server/","title":"Configurer le NFS cot\u00e9 serveur","text":""},{"location":"scripts/nfs/server/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Avoir un acc\u00e8s root sur la machine physique (ou virtuelle) sur laquelle lancer l'installation</li> </ul>"},{"location":"scripts/nfs/server/#installation-du-serveur-nfs","title":"Installation du serveur NFS","text":""},{"location":"scripts/nfs/server/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script d'installation du NFS cot\u00e9 client est disponible ici : Installer NFS serveur</p>"},{"location":"scripts/nfs/server/#installation","title":"Installation","text":"<p>Pour installer le NFS cot\u00e9 client, il suffit de lancer le script <code>nfs_install_serveur.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>serveur@machine:~# ./nfs_install_serveur.sh \n</code></pre>"},{"location":"scripts/nfs/server/#ajout-client","title":"Ajout client","text":"<p>Il vous faut \u00e0 pr\u00e9sent ajouter un client \u00e0 qui le serveur NFS aura le droit de r\u00e9pondre afin de partager des r\u00e9pertoires.</p>"},{"location":"scripts/nfs/server/#telechargement-de-ce-script","title":"T\u00e9l\u00e9chargement de ce script","text":"<p>Le script d'installation du NFS cot\u00e9 client est disponible ici : Ajouter client NFS</p>"},{"location":"scripts/nfs/server/#utilisation-du-script","title":"Utilisation du script","text":"<p>Pour installer le NFS cot\u00e9 client, il suffit de lancer le script <code>nfs_add_client.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> : Il vous faudra renseign\u00e9 l'addresse ip du client \u00e0 laquelle le serveur sera autoris\u00e9 \u00e0 r\u00e9pondre.</p> <pre><code>serveur@machine:~# ./nfs_add_client.sh \n</code></pre>"},{"location":"scripts/nfs/server/#test","title":"Test","text":"<p>Apr\u00e8s le reboot, vous verrez le homedir des utilisateurs de la machines cliente \u00eatre mont\u00e9s sur le serveur de fichiers</p>"},{"location":"scripts/postgres/server/","title":"Mise en place de Postgres","text":"<p>Postgres est un serveur de base de donn\u00e9es, qui permet de stocker des donn\u00e9es de mani\u00e8re s\u00e9curis\u00e9e, et de les r\u00e9cup\u00e9rer facilement \u00e0 l'aide du langage SQL, par exemple en passant par le r\u00e9seau.</p>"},{"location":"scripts/postgres/server/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Une connexion internet active est n\u00e9cessaire pour lancer ce script.</li> <li>Un acc\u00e8s <code>root</code> \u00e0 la machine virtuelle</li> <li>Un espace de stockage d'environ 5Go disponibles</li> </ul>"},{"location":"scripts/postgres/server/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script de mise en place de Postgres est disponible ici : Installation Postgres</p>"},{"location":"scripts/postgres/server/#utilisation","title":"Utilisation","text":"<p>Pour installer le serveur postgres, il suffit de lancer le script <code>postgres_install.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>root@machine:~# ./postgres_install.sh\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>root@machine:~# chmod +x postgres_install.sh\n</code></pre> <p>Le script va installer les packages n\u00e9cessaires \u00e0 l'installation de Postgres, et va ensuite lancer l'installation de Postgres avec la configuration par d\u00e9faut. Ce script est enti\u00e8rement automatique, et ne n\u00e9cessite pas d'autres changements.</p>"},{"location":"scripts/test/connectivite/","title":"Tester la disponibilit\u00e9 des machines de l'infrastructure","text":"<p>L'infrastructure est compos\u00e9e d'une multitude de machines, qui sont toutes connect\u00e9es au r\u00e9seau. Pour pouvoir communiquer entre elles, il faut donc que ces machines soient accessibles depuis n'importe quelle autre machine du r\u00e9seau.</p> <p>Afin de v\u00e9rifier que les machines sont bien accessibles, il est possible de lancer un script qui va tester la connectivit\u00e9 entre toutes les machines de l'infrastructure, \u00e0 l'aide d'une succession de pings.</p>"},{"location":"scripts/test/connectivite/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Une connexion internet active est n\u00e9cessaire pour lancer ce script.</li> </ul>"},{"location":"scripts/test/connectivite/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script de test de connectivit\u00e9 est disponible ici : Test de connectivit\u00e9</p>"},{"location":"scripts/test/connectivite/#utilisation","title":"Utilisation","text":"<p>Pour utiliser ce script, il suffit de le lancer en tant qu'un utilisateur ayant les droits d'ex\u00e9cution :</p> <p>Donner acc\u00e8s d'execution :</p> <pre><code>chmod +x test-connectivite.sh\n</code></pre> <p>Lancer le script :</p> <pre><code>utilisateur@machine:~# ./test-connectivite.sh\n</code></pre> <p>Ce script va tester toutes les addresses contenues dans le script lui-m\u00eame, et afficher le r\u00e9sultat de chaque ping.</p> <p>Dans le cas o\u00f9 le ping \u00e9choue, le script va afficher le message suivant :</p> <pre><code>192.168.0.0 : routeur-principal n'est pas joignable\n</code></pre> <p>Si le ping r\u00e9ussit, le script affichera le message suivant :</p> <pre><code>192.168.0.0 : routeur-principal est pas joignable\n</code></pre> <p>Pour ajouter une nouvelle machine \u00e0 tester, il suffit d'ajouter une nouvelle ligne dans le tableau 'machine' du script, avec l'adresse IP de la machine \u00e0 tester :</p> <pre><code>[\"&lt;addresse IP de la machine&gt;\"]=\"&lt;nom commun de la machine&gt;\"\n</code></pre>"},{"location":"scripts/test/services/","title":"Tester les services de l'infrastructure","text":"<p>L'infrastructure a quelques serveurs qui contiennent des services, accessibles par les machines internes. Certains sont critiques au bon fonctionnement de l'infrastructure, et il est donc important de pouvoir les tester.</p> <p>Ce script permet de v\u00e9rifier l'\u00e9tat de ces services pour savoir si ils sont disponibles ou non.</p>"},{"location":"scripts/test/services/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Une connexion internet active est n\u00e9cessaire pour lancer ce script.</li> </ul>"},{"location":"scripts/test/services/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script de test des services est disponible ici : Test des services</p>"},{"location":"scripts/test/services/#utilisation","title":"Utilisation","text":"<p>Pour utiliser ce script, il suffit de le lancer en tant qu'un utilisateur ayant les droits d'ex\u00e9cution :</p> <p>Donner acc\u00e8s d'execution :</p> <pre><code>chmod +x test-services.sh\n</code></pre> <p>Lancer le script :</p> <pre><code>utilisateur@machine:~# ./test-services.sh\n</code></pre> <p>Ce script va tester un par un certains services pour lesquels les \u00e9tapes de scripts sont d\u00e9finies, et afficher le r\u00e9sultat de chaque test.</p> <p>Le script imprimera les r\u00e9sultats de ces tests sous la forme suivante :</p> <pre><code>R\u00e9ponse de 192.168.1.8 - service DHCP semble en marche\n</code></pre>"},{"location":"scripts/vm/create/","title":"Cr\u00e9er une nouvelle machine virtuelle","text":"<p>L'infrastructure de Cipher se base sur une architecture de machines virtuelles imbriqu\u00e9es, faisant utilisation de KVM comme support de virtualisation.</p>"},{"location":"scripts/vm/create/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Avoir une machine physique (ou virtuelle) sur laquelle lancer l'installation</li> <li>Avoir configur\u00e9 les r\u00e9seaux voulus en avance</li> <li>Avoir une connexion internet et s'assurer que le NAT est bien configur\u00e9</li> </ul>"},{"location":"scripts/vm/create/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script d'installation de la machine virtuelle est disponible ici : Cr\u00e9er Machine Virtuelle</p>"},{"location":"scripts/vm/create/#installation","title":"Installation","text":"<p>Pour installer une nouvelle machine virtuelle, il suffit de lancer le script <code>create_vm.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>utilisateur@machine:~# ./create_vm.sh &lt;nom de la machine&gt; &lt;nombre de coeurs de CPU \u00e0 allouer&gt; &lt;taille de la RAM \u00e0 utiliser (en MBytes)&gt; &lt;taille du stockage (en Go)&gt;\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>utilisateur@machine:~# chmod +x create_vm.sh\n</code></pre>"},{"location":"scripts/vm/create/#configuration","title":"Configuration","text":"<p>La machine virtuelle cr\u00e9\u00e9e est une Debian 11, mais emploie des param\u00e8tres de configuration par d\u00e9faut. Il est donc n\u00e9cessaire de la configurer pour qu'elle soit utilisable et s\u00e9curis\u00e9e.</p> <p>Pour se connecter pour la premi\u00e8re fois \u00e0 la machine virtuelle, il faut lancer la console graphique. Puis, se connecter avec les identifiants suivants :</p> <ul> <li>Utilisateur : <code>root</code></li> <li>Mot de passe : <code>root</code></li> </ul>"},{"location":"scripts/vm/create/#sur-un-client","title":"Sur un client","text":"<p>Si votre machine est une machine cliente, les \u00e9tapes suivantes sont d\u00e9j\u00e0 inclues dans un script de post-installation, qui se charge de faire toute la configuration automatiquement; il suffit de lancer le script <code>post_install.sh</code> en tant que <code>root</code> :</p> <pre><code>root@unassigned:~# chmod +x post_install.sh\nroot@unassigned:~# ./post_install.sh\n</code></pre>"},{"location":"scripts/vm/create/#sur-un-serveur","title":"Sur un serveur","text":""},{"location":"scripts/vm/create/#changement-du-nom-de-la-machine","title":"Changement du nom de la machine","text":"<p>Le nom par d\u00e9faut de la machine sera \"unassigned\". Il est donc possible de le changer en utilisant la commande suivante :</p> <pre><code>root@unassigned:~# hostnamectl set-hostname &lt;nom de la machine&gt;\n</code></pre>"},{"location":"scripts/vm/create/#changement-du-mot-de-passe-de-lutilisateur-root","title":"Changement du mot de passe de l'utilisateur <code>root</code>","text":"<p>Le mot de passe root par d\u00e9faut est tr\u00e8s peu s\u00e9curis\u00e9. Il est n\u00e9cessaire de le changer pour garantir un niveau de s\u00e9curit\u00e9 suffisant. Nous recommandons un mot de passe d'au moins 12 caract\u00e8res, contenant des chiffres, des lettres majuscules et minuscules, ainsi que des caract\u00e8res sp\u00e9ciaux.</p> <pre><code>root@machine:~# passwd\n</code></pre>"},{"location":"scripts/vm/create/#ajout-dun-compte-utilisateur","title":"Ajout d'un compte utilisateur","text":"<p>Le compte root n'est \u00e0 utiliser que pour des op\u00e9rations d'administration. Il est donc n\u00e9cessaire de cr\u00e9er un compte utilisateur pour pouvoir se connecter \u00e0 la machine virtuelle et effectuer des actions de base qui ne n\u00e9cessitent pas de privil\u00e8ges particuliers.</p> <pre><code>root@machine:~# adduser &lt;nom de l'utilisateur&gt;\n</code></pre> <p>Il vous sera demander plusieurs informations, dont le mot de passe de cet utilisateur, son nom complet, son num\u00e9ro de t\u00e9l\u00e9phone, etc.</p>"},{"location":"scripts/vm/create/#suppression-du-compte-par-defaut","title":"Suppression du compte par d\u00e9faut","text":"<p>Lors de l'installation, un compte par d\u00e9faut est cr\u00e9\u00e9. Il est possible de le supprimer, son r\u00f4le \u00e9tant uniquement li\u00e9 \u00e0 l'installation de la machine.</p> <pre><code>userdel -r setupaccount\n</code></pre>"},{"location":"scripts/vm/create/#configuration-du-reseau","title":"Configuration du r\u00e9seau","text":"<p>La machine virtuelle cr\u00e9\u00e9e est configur\u00e9e pour utiliser le r\u00e9seau <code>default</code> par d\u00e9faut. Il est possible de la configurer pour utiliser un autre r\u00e9seau en modifiant le fichier <code>/etc/network/interfaces</code> en tant que <code>root</code>:</p> <pre><code>root@machine:~# nano /etc/network/interfaces\n</code></pre> <p>Sur un serveur, il y a deux m\u00e9thodes pour modifier son adresse IP :</p> <ul> <li>Utiliser le DHCP pour le serveur (sauf si c'est le serveur DHCP), qui lui attribuera une IP statique</li> </ul> <p>Dans ce cas, utiliser le script <code>dhcp_install_client.sh</code> pour configurer la machine pour qu'elle utilise le serveur DHCP.</p> <ul> <li>Utiliser une IP statique directement, auquel cas il faut modifier le fichier directement</li> </ul> <p>Pour continuer, il faudra conna\u00eetre le nom de l'interface r\u00e9seau \u00e0 modifier. Pour cela, il faut utiliser la commande <code>ip a</code> pour lister les interfaces r\u00e9seau disponibles :</p> <pre><code>root@machine:~# ip a\n</code></pre> <p>Avec le nom de l'interface, il est possible de modifier le fichier <code>/etc/network/interfaces</code> pour configurer l'interface r\u00e9seau :</p> <pre><code>allow-hotplug &lt;nom de l'interface&gt;\niface &lt;nom de l'interface&gt; inet static\n    address &lt;adresse IP&gt;\n    netmask &lt;masque de sous-r\u00e9seau&gt;\n    gateway &lt;adresse IP de la passerelle&gt;\n</code></pre>"},{"location":"scripts/vm/create/#changement-de-carte-reseau","title":"Changement de carte r\u00e9seau","text":"<p>Comme nous travaillons dans une machine virtuelle, il faut changer la carte r\u00e9seau pour ne plus utiliser le r\u00e9seau virtuel <code>default</code>, mais le r\u00e9seau voulu (DMZ, Serveurs, Machines, etc.).</p> <p>Dans la console virt-manager, cliquer sur l'ic\u00f4ne ampoule en haut \u00e0 gauche, et trouver la carte r\u00e9seau \u00e0 modifier (NIC :xx:xx:xx). Cliquer dessus, et changer le \"Network Source\" \u00e0 celui voulu.</p> <p>Appliquer ces changements en cliquant sur \"Apply\".</p> <p>Derni\u00e8rement, il faut red\u00e9marrer la machine virtuelle pour que les changements soient pris en compte.</p>"},{"location":"scripts/vm/create/#finalisation","title":"Finalisation","text":"<p>Apr\u00e8s le reboot de la machine virtuelle, la nouvelle configuration devrait \u00eatre prise en compte. Pour le v\u00e9rifier, soit connectez vous avec le nouveau compte utilisateur, soit connectez vous en tant que <code>root</code> et v\u00e9rifiez que le nom de la machine est bien celui voulu.</p> <p>Il faut aussi que la machine ait une connexion internet qui marche. Pour cela il est possible de pinguer un serveur DNS (google par exemple) :</p> <pre><code>utilisateur@nom_machine:~# ping google.fr\n</code></pre> <p>Si tout est bon, le ping devrait marcher, sinon se r\u00e9f\u00e9rer \u00e0 la section \"Troubleshooting\".</p>"},{"location":"scripts/vm/post-install/","title":"Post-Installation de la machine virtuelle","text":"<p>Juste apr\u00e8s la cr\u00e9ation d'une machine virtuelle, il est souvent n\u00e9cessaire d'effectuer des actions suppl\u00e9mentaires de configuration. Ce script automatise ces actions et permet de les effectuer en une seule commande.</p> <p>Ce script est principalement d\u00e9di\u00e9 aux machines clientes, car les paquets qui seront install\u00e9s sont ceux qui sont n\u00e9cessaires pour les clients.</p>"},{"location":"scripts/vm/post-install/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Machine virtuelle install\u00e9e</li> <li>Connexion internet active</li> <li>Avoir un acc\u00e8s <code>root</code> \u00e0 la machine virtuelle</li> </ul>"},{"location":"scripts/vm/post-install/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script de post-installation de la machine virtuelle est disponible ici : Post-Installation Machine Virtuelle</p>"},{"location":"scripts/vm/post-install/#installation","title":"Installation","text":"<p>Pour utiliser ce script sur une nouvelle machine virtuelle, le lancer en tant que <code>root</code> :</p> <pre><code>utilisateur@machine:~# ./post-install.sh\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>utilisateur@machine:~# chmod +x post-install.sh\n</code></pre>"},{"location":"scripts/vm/post-install/#configuration","title":"Configuration","text":"<p>Le script de post-installation effectue les actions suivantes :</p> <ul> <li>Modification du nom de la machine virtuelle</li> </ul> <p>Il faudra ici rentrer un nom pour la machine virtuelle. Ce nom sera utilis\u00e9 pour identifier la machine virtuelle dans le r\u00e9seau.</p> <ul> <li>Ajout d'un utilisateur</li> </ul> <p>Cet utilisateur sera utilis\u00e9 pour se connecter \u00e0 la machine virtuelle, et pour accomplir les t\u00e2ches g\u00e9n\u00e9rales li\u00e9es \u00e0 cette machine. Il faudra donc rentrer un nom d'utilisateur et un mot de passe pour cet utilisateur.</p> <ul> <li>Suppression de l'utilisateur d'installation</li> </ul> <p>Par d\u00e9faut, lors de l'installation, un utilisateur par d\u00e9faut est mis en place. Il n'a plus d'utilit\u00e9 d\u00e8s la machine install\u00e9e, donc le script le supprime.</p> <ul> <li>Modification du mot de passe de l'utilisateur <code>root</code></li> </ul> <p>Le mot de passe par d\u00e9faut du compte <code>root</code> est <code>root</code>, ce qui est peu s\u00e9curis\u00e9. Le script demande \u00e0 l'utilisateur de le changement pour am\u00e9liorer la s\u00e9curit\u00e9 de la machine virtuelle.</p> <ul> <li>Installation de l'agent Zabbix</li> </ul> <p>L'infrastructure utilise Zabbix afin de surveiller les machines virtuelles connect\u00e9es au r\u00e9seau. L'agent Zabbix est install\u00e9 sur chaque machine virtuelle afin de permettre \u00e0 Zabbix de surveiller la machine virtuelle.</p> <ul> <li>Installation du LDAP client</li> </ul> <p>Le LDAP permet d'authentifier et identifier les utilisateurs sur le r\u00e9seau de l'infrastructure. L'installation du client LDAP permet aux machines virtuelles de se connecter \u00e0 ce serice centralis\u00e9 pour g\u00e9rer les utilisateurs et l'authentification.</p> <p>Voir le script LDAP Client pour plus d'informations.</p> <ul> <li>Installation du NFS (serveur de fichiers) client</li> </ul> <p>Pour faciliter l'utilisation de l'infrastructure, un serveur de fichiers est mis en place. Ce serveur permet de partager des fichiers entre les machines virtuelles \u00e0 partir d'un serveur central. L'installation du client NFS permet aux machines virtuelles de se connecter \u00e0 ce serveur de fichiers.</p> <p>Voir le script NFS Client pour plus d'informations.</p> <ul> <li>Installation du client DNS</li> </ul> <p>Le DNS permet de r\u00e9cup\u00e9rer l'adresse IP d'un nom de domaine. L'installation du client DNS permet aux machines virtuelles de se connecter \u00e0 ce service centralis\u00e9 pour r\u00e9cup\u00e9rer l'adresse IP d'un nom de domaine pour correctement navviguer sur internet, et permet d'attribuer aux machines un nom de domaine.</p> <pre><code>ex: dns.cipher.com\n</code></pre> <p>Voir le script DNS Client pour plus d'informations.</p> <ul> <li>Installation du client DHCP</li> </ul> <p>Le client DHCP permet de r\u00e9cup\u00e9rer une adresse IP dynamiquement de la part du serveur DHCP mis en place. L'installation du client DHCP permet aux machines virtuelles de se connecter \u00e0 ce service centralis\u00e9 pour r\u00e9cup\u00e9rer une adresse IP dynamiquement.</p> <p>Voir le script DHCP Client pour plus d'informations.</p>"},{"location":"scripts/vm/preseed-iso/","title":"Preseed de l'ISO","text":"<p>Le preseed est un fichier de configuration qui permet de configurer automatiquement une machine virtuelle lors de son installation. Il est possible de configurer le preseed de l'ISO de Debian afin de configurer automatiquement la machine virtuelle lors de son installation. A l'aide d'un script, il est possible de passer d'un ISO normal \u00e0 un ISO pr\u00e9configur\u00e9 avec les param\u00e8tres pr\u00e9cis qui correspondent \u00e0 notre installation.</p>"},{"location":"scripts/vm/preseed-iso/#avertissements","title":"Avertissements","text":"<p>Ce fichier et script est avanc\u00e9, et n\u00e9cessite une certaine connaissance de l'installation de Debian. Il est conseill\u00e9 de ne pas modifier ce fichier si vous n'\u00eates pas s\u00fbr de ce que vous faites, et de lire la documentation de Debian avant de l'utiliser.</p>"},{"location":"scripts/vm/preseed-iso/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le fichier de preseed que nous utilisons est disponible ici : Preseed de l'ISO Le script permettant de passer d'un ISO normal \u00e0 l'ISO pr\u00e9configur\u00e9 est disponible ici : Script de pr\u00e9configuration de l'ISO</p>"},{"location":"scripts/vm/preseed-iso/#utilisation","title":"Utilisation","text":"<p>Une fois le script t\u00e9l\u00e9charg\u00e9, il est possible de  l'utiliser pour cr\u00e9er un ISO pr\u00e9configur\u00e9. Pour cela, il suffit de lancer le script <code>make-preseed-iso.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code>, dans le m\u00eame r\u00e9pertoire que l'ISO de Debian et que le fichier de preseed :</p> <pre><code>root@machine:~# ./make-preseed-iso.sh &lt;/chemin/vers/iso/debian.iso&gt;\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>root@machine:~# chmod +x make-preseed-iso.sh\n</code></pre> <p>Le script va alors cr\u00e9er un nouveau fichier ISO pr\u00e9configur\u00e9, dans le m\u00eame r\u00e9pertoire que l'ISO de Debian. Il sera possible de l'utiliser pour installer une machine virtuelle avec les param\u00e8tres de configuration du fichier de preseed.</p>"},{"location":"scripts/zabbix/server/","title":"Mise en place de Zabbix","text":"<p>Zabbix est un outil de supervision d'infrastructure, qui permet de surveiller l'\u00e9tat de l'infrastructure, et d'\u00eatre alert\u00e9 en cas de probl\u00e8me. Le script de mise en place de Zabbix permet de mettre en place un serveur Zabbix, qui sera utilis\u00e9 pour surveiller l'infrastructure, il est semi-automatique, et n\u00e9cessite une intervention manuelle pour la configuration de certains param\u00e8tres.</p> <p>De plus, la fin de l'installation se fait sur l'interface web de Zabbix, de mani\u00e8re manuelle.</p>"},{"location":"scripts/zabbix/server/#prerequis","title":"Pr\u00e9requis","text":"<ul> <li>Un espace de stockage d'environ 5Go</li> <li>Un acc\u00e8s <code>root</code> \u00e0 la machine virtuelle</li> <li>Une connexion internet active est n\u00e9cessaire pour lancer ce script.</li> </ul>"},{"location":"scripts/zabbix/server/#telechargement","title":"T\u00e9l\u00e9chargement","text":"<p>Le script de mise en place de Zabbix est disponible ici : Installation Zabbix</p>"},{"location":"scripts/zabbix/server/#utilisation","title":"Utilisation","text":"<p>Pour installer le serveur zabbix, il suffit de lancer le script <code>zabbix_install.sh</code> t\u00e9l\u00e9charg\u00e9 au-dessus en tant que <code>root</code> :</p> <pre><code>root@machine:~# ./zabbix_install.sh\n</code></pre> <p>Afin de faire tourner ce script, il sera possiblement n\u00e9cessaire de lui donner les droits d'ex\u00e9cution :</p> <pre><code>root@machine:~# chmod +x zabbix_install.sh\n</code></pre>"},{"location":"scripts/zabbix/server/#configuration","title":"Configuration","text":"<p>Le script va commencer par installer tous les paquets n\u00e9cessaires \u00e0 l'installation de Zabbix, puis va configurer la base de donn\u00e9es MySQL, et enfin va configurer Zabbix.</p> <p>Pendant l'utilisation du script, on vous demandera de rentrer des informations, il s'agit du :</p> <ul> <li>Mot de passe de la base de donn\u00e9es</li> <li>Param\u00e8tres de la base de donn\u00e9es</li> </ul> <p>Cette op\u00e9ration est \u00e0 faire manuellement, m\u00eame si les param\u00e8tres par d\u00e9faut sont propos\u00e9s et g\u00e9n\u00e9ralement accept\u00e9s.</p> <p>Suite \u00e0 cela le script se mettre en pause et demandera de compl\u00e9ter les conditions d'installation. Il faudra donc :</p> <ul> <li>Effectuer cette commande</li> </ul> <pre><code>root@machine:~# mysql -uroot\n</code></pre> <p>Puis exectuer la commande suivante pour cr\u00e9er la base de donn\u00e9es :</p> <pre><code>MariaDB [(none)]&gt; create database zabbix character set utf8mb4 collate utf8mb4_bin;\n</code></pre> <p>Puis exectuer la commande suivante pour cr\u00e9er l'utilisateur et donner les permissions :</p> <pre><code>MariaDB [(none)]&gt; grant all privileges on zabbix.* to zabbix@localhost identified by &lt;mot de passe&gt;;\n</code></pre> <p>Une fois ces deux op\u00e9rations termin\u00e9es, poursuivre dans l'installation du script.</p> <p>Attention, certaines \u00e9tapes de l'installation sont longues.</p> <p>Lorsque le script se termine, il demandera de se connecter \u00e0 l'interface web de Zabbix, pour cela il faudra se rendre sur l'adresse <code>http://&lt;adresse IP de la machine&gt;/zabbix</code> et se connecter avec les identifiants par d\u00e9faut :</p> <ul> <li>Identifiant : <code>Admin</code></li> <li>Mot de passe : <code>zabbix</code></li> </ul>"},{"location":"scripts/zabbix/server/#configuration-de-zabbix","title":"Configuration de Zabbix","text":"<p>Une fois connect\u00e9 \u00e0 l'interface web de Zabbix, il faudra configurer le serveur Zabbix, pour cela il faudra utiliser principalement les param\u00e8tres par d\u00e9faut propos\u00e9s par l'interface web.</p> <p>Il faudra cependant entrer le mot de passe de la base de donn\u00e9es, et le nom de la base de donn\u00e9es, qui sont les m\u00eames que ceux rentr\u00e9s lors de l'installation.</p>"},{"location":"scripts/zabbix/server/#configuration-des-machines-a-superviser","title":"Configuration des machines \u00e0 superviser","text":"<p>Pour utiliser Zabbix, il faut pouvoir d\u00e9tecter les machines \u00e0 superviser. Zabbix le permet de mani\u00e8re automatique, mais il doit \u00eatre configur\u00e9 pour cela.</p>"},{"location":"scripts/zabbix/server/#decouverte-des-machines","title":"D\u00e9couverte des machines","text":"<p>Pour que Zabbix puisse d\u00e9tecter les machines \u00e0 superviser, il faut cr\u00e9er une (ou plusieurs) r\u00e8gles de d\u00e9couverte.</p> <p>Pour cela, il faut se rendre dans la section <code>Collecte de donn\u00e9es</code> de l'interface web de Zabbix, puis dans la sous-section <code>D\u00e9couverte</code>.</p> <p>Ici, cliquez sur le bouton <code>Cr\u00e9er une d\u00e9couverte</code> et entrez les informations suivantes :</p> <ul> <li>Nom : <code>&lt;un nom appropri\u00e9 \u00e0 la r\u00e8gle voulue, ex: dmz-discovery&gt;</code></li> <li>Proxy : <code>Aucun (sauf si vous utilisez un proxy)</code></li> <li>Plage d'adresses IP : <code>&lt;Une plage d'IP, ex: 192.168.0.0/24&gt;</code></li> <li>Intervalle d'actualisation : <code>1h</code></li> <li>V\u00e9rifications :</li> <li><code>Ping ICMP</code></li> </ul> <p>Pour le reste, la configuration par d\u00e9faut est suffisante.</p> <p>Cliquez sur ajouter, et la r\u00e8gle de d\u00e9couverte est cr\u00e9\u00e9e.</p>"},{"location":"scripts/zabbix/server/#actions-de-decouverte","title":"Actions de d\u00e9couverte","text":"<p>Une fois la r\u00e8gle de d\u00e9couverte cr\u00e9\u00e9e, il faut cr\u00e9er une action de d\u00e9couverte, qui permettra de cr\u00e9er les h\u00f4tes dans Zabbix et \u00e9ventuellement d'effectuer les actions voulues.</p> <p>Pour cela, il faut se rendre dans la section <code>Alertes</code> de l'interface web de Zabbix, puis dans la sous-section <code>Actions</code>, et enfin sur <code>Actions de d\u00e9couverte</code>.</p> <p>Ici, cliquez sur le bouton <code>Cr\u00e9er une action</code> et entrez les informations suivantes :</p> <ul> <li>Nom : <code>&lt;un nom appropri\u00e9 \u00e0 l'action voulue, ex: dmz-action&gt;</code></li> <li>Conditions :</li> <li>Type : <code>Test de d\u00e9couverte</code></li> <li>Op\u00e9rateur : <code>\u00e9gal</code></li> <li>Test de d\u00e9couverte : <code>&lt;r\u00e8gle cr\u00e9\u00e9e pr\u00e9c\u00e9demment&gt;</code></li> <li>Op\u00e9rations :</li> <li>Op\u00e9ration : <code>Ajouter h\u00f4te</code></li> <li>Op\u00e9ration : <code>Ajouter au groupe d'h\u00f4tes</code><ul> <li>Groupe d'h\u00f4tes : <code>&lt;Linux Servers&gt;</code></li> </ul> </li> </ul> <p>Ajoutez cette action, et c'est termin\u00e9!</p>"},{"location":"scripts/zabbix/server/#verifications","title":"V\u00e9rifications","text":"<p>Vous pouvez \u00e9ventuellement relancer le service Zabbix sur le serveur pour prendre en compte les changements:</p> <pre><code>root@machine:~# systemctl restart zabbix-server\n</code></pre> <p>Au bout d'un certain temps (ce n'est pas instantan\u00e9), vous pouvez \u00e9galement v\u00e9rifier que les h\u00f4tes sont bien d\u00e9tect\u00e9s dans l'interface web de Zabbix, dans la section <code>H\u00f4tes</code> de l'interface web de Zabbix.</p>"}]}